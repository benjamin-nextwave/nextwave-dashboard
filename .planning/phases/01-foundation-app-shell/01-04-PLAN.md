---
phase: 01-foundation-app-shell
plan: 04
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - src/components/navigation.tsx
  - src/app/layout.tsx
  - src/app/page.tsx
  - src/app/gantt/page.tsx
  - src/app/bedrijven/page.tsx
autonomous: false

must_haves:
  truths:
    - "Navigation bar shows three links: Dashboard, Gantt, Bedrijven"
    - "The active page link is visually distinct from inactive links"
    - "Dark mode toggle in the navigation bar switches themes"
    - "Theme preference survives full page reload without flash of wrong theme"
    - "All three pages render with Dutch placeholder text"
    - "Layout wraps all pages with ThemeProvider, TodayProvider, and Navigation"
    - "Responsive layout is desktop-first with sensible mobile behavior"
  artifacts:
    - path: "src/components/navigation.tsx"
      provides: "App navigation with active page indicator and theme toggle"
      exports: ["Navigation"]
    - path: "src/app/layout.tsx"
      provides: "Root layout with providers and navigation"
      contains: "ThemeProvider"
    - path: "src/app/page.tsx"
      provides: "Dashboard page placeholder"
      contains: "Dashboard"
    - path: "src/app/gantt/page.tsx"
      provides: "Gantt page placeholder"
      contains: "Gantt"
    - path: "src/app/bedrijven/page.tsx"
      provides: "Bedrijven page placeholder"
      contains: "Bedrijven"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/components/theme-provider.tsx"
      via: "ThemeProvider wrapping body content"
      pattern: "ThemeProvider"
    - from: "src/app/layout.tsx"
      to: "src/lib/today-provider.tsx"
      via: "TodayProvider wrapping body content"
      pattern: "TodayProvider"
    - from: "src/app/layout.tsx"
      to: "src/components/navigation.tsx"
      via: "Navigation rendered in layout body"
      pattern: "<Navigation"
    - from: "src/components/navigation.tsx"
      to: "src/components/theme-toggle.tsx"
      via: "ThemeToggle rendered in navigation bar"
      pattern: "<ThemeToggle"
    - from: "src/components/navigation.tsx"
      to: "next/navigation"
      via: "usePathname for active page detection"
      pattern: "usePathname"
---

<objective>
Build the navigation component, create page shells for all three routes, and wire everything together in the root layout with providers.

Purpose: This completes the app shell -- the user can navigate between pages, toggle dark/light mode, and see a consistent navigation bar across all pages. This is the last plan in Phase 1 that produces the visible, interactive application.
Output: Working navigation with active page indicator, three page shells, and root layout with all providers wired.
</objective>

<execution_context>
@C:\Users\bstei\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bstei\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-app-shell/01-RESEARCH.md
@.planning/phases/01-foundation-app-shell/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create navigation component and page shells</name>
  <files>
    src/components/navigation.tsx
    src/app/gantt/page.tsx
    src/app/bedrijven/page.tsx
    src/app/page.tsx
  </files>
  <action>
    1. Create `src/components/navigation.tsx` as a 'use client' component:
       - Import Link from 'next/link', usePathname from 'next/navigation'
       - Import ThemeToggle from '@/components/theme-toggle'
       - Import cn from '@/lib/utils'
       - Define navItems array: [{ href: '/', label: 'Dashboard' }, { href: '/gantt', label: 'Gantt' }, { href: '/bedrijven', label: 'Bedrijven' }]
       - Render a nav element with:
         a) Flexbox row with items centered, gap between items
         b) Bottom border for visual separation
         c) Horizontal padding (px-6) and vertical padding (py-3)
         d) Map over navItems rendering Next.js Link components
         e) Active detection: `pathname === item.href` (exact match for '/', startsWith for others). Actually for this app with 3 simple routes, exact match (`pathname === item.href`) works for all three since '/bedrijven' won't have sub-routes in Phase 1.
         f) Active link: `text-foreground font-medium` (bold, full color)
         g) Inactive link: `text-muted-foreground` with `hover:text-foreground/80` transition
         h) ThemeToggle in a div with `ml-auto` to push it to the right
       - Export as named export `Navigation`

    2. Create `src/app/gantt/page.tsx`:
       ```tsx
       export default function GanttPage() {
         return (
           <main className="p-6">
             <h1 className="text-2xl font-bold">Gantt</h1>
             <p className="text-muted-foreground mt-2">Gantt-weergave wordt hier gebouwd in Fase 3.</p>
           </main>
         )
       }
       ```

    3. Create `src/app/bedrijven/page.tsx`:
       ```tsx
       export default function BedrijvenPage() {
         return (
           <main className="p-6">
             <h1 className="text-2xl font-bold">Bedrijven</h1>
             <p className="text-muted-foreground mt-2">Bedrijvenoverzicht wordt hier gebouwd in Fase 2.</p>
           </main>
         )
       }
       ```

    4. Update `src/app/page.tsx` to show Dashboard placeholder with Dutch text:
       ```tsx
       export default function DashboardPage() {
         return (
           <main className="p-6">
             <h1 className="text-2xl font-bold">Dashboard</h1>
             <p className="text-muted-foreground mt-2">Dagoverzicht wordt hier gebouwd in Fase 4.</p>
           </main>
         )
       }
       ```

    IMPORTANT:
    - Navigation must be a 'use client' component (uses usePathname hook)
    - Page shells are server components (no 'use client' needed -- they're just static placeholders)
    - Use semantic Tailwind color classes (text-foreground, text-muted-foreground, border-border) NOT raw colors (text-gray-900, text-white). This ensures dark mode works via CSS variables.
    - Dutch labels throughout: "Bedrijven" not "Companies", placeholder text in Dutch
  </action>
  <verify>
    `npx tsc --noEmit` passes.
    Navigation component exports Navigation.
    All three page files exist: src/app/page.tsx, src/app/gantt/page.tsx, src/app/bedrijven/page.tsx.
  </verify>
  <done>
    Navigation component renders 3 links with active page detection and ThemeToggle. Three page shells exist with Dutch placeholder text. All use semantic Tailwind colors for dark mode compatibility.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire root layout with providers and navigation</name>
  <files>
    src/app/layout.tsx
  </files>
  <action>
    Update `src/app/layout.tsx` to compose all providers and navigation:

    1. Import ThemeProvider from '@/components/theme-provider'
    2. Import TodayProvider from '@/lib/today-provider'
    3. Import Navigation from '@/components/navigation'
    4. Import the Inter font from 'next/font/google' (or keep whatever font create-next-app scaffolded)

    5. Set metadata:
       ```tsx
       export const metadata: Metadata = {
         title: 'NextWave Dashboard',
         description: 'Client management dashboard',
       }
       ```

    6. Structure the layout:
       ```tsx
       export default function RootLayout({ children }: { children: React.ReactNode }) {
         return (
           <html lang="nl" suppressHydrationWarning>
             <body className={`${font.variable} font-sans antialiased`}>
               <ThemeProvider
                 attribute="class"
                 defaultTheme="system"
                 enableSystem
                 disableTransitionOnChange
               >
                 <TodayProvider>
                   <div className="min-h-screen bg-background text-foreground">
                     <Navigation />
                     {children}
                   </div>
                 </TodayProvider>
               </ThemeProvider>
             </body>
           </html>
         )
       }
       ```

    CRITICAL:
    - `lang="nl"` on html element (Dutch language)
    - `suppressHydrationWarning` on html element (required for next-themes to avoid hydration mismatch)
    - `attribute="class"` on ThemeProvider (Tailwind dark mode uses class strategy)
    - `defaultTheme="system"` to respect OS preference
    - `disableTransitionOnChange` to prevent color flash on theme switch
    - `bg-background text-foreground` on the wrapper div for theme-aware base colors
    - ThemeProvider wraps TodayProvider wraps Navigation + children (order matters: theme must be outermost so child components can read theme)
    - The layout itself is a server component (no 'use client') -- the providers are client components and that's fine
  </action>
  <verify>
    `npm run build` succeeds.
    `npm run dev` -- app loads at localhost:3000 showing Navigation bar with Dashboard, Gantt, Bedrijven links and a theme toggle.
    Clicking links navigates between pages. Active page link is visually distinct.
    Theme toggle switches between dark and light mode.
    Refreshing the page preserves the chosen theme without flash.
  </verify>
  <done>
    Root layout composes ThemeProvider, TodayProvider, and Navigation. All pages render with consistent navigation. Dark/light mode works with persistence and no hydration flash. The app shell is complete.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Phase 1 app shell: Next.js 16 project with shadcn/ui, database types, Supabase client, date utilities, overdue computation, dark/light mode, and three-page navigation.
  </what-built>
  <how-to-verify>
    1. Run `npm run dev` and open http://localhost:3000
    2. Verify navigation bar shows Dashboard, Gantt, Bedrijven links
    3. Click each link -- verify the page changes and the active link is visually highlighted
    4. Click the theme toggle (sun/moon icon) -- verify it switches between dark and light mode
    5. Refresh the page -- verify the theme preference is preserved (no flash of wrong theme)
    6. Check that page placeholders show Dutch text ("Dagoverzicht wordt hier gebouwd in Fase 4", etc.)
    7. Verify the overall look: clean typography, proper spacing, light mode has white background with gray borders, dark mode has dark gray background with appropriate contrast
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues with the app shell</resume-signal>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- `npm run dev` starts and app loads at localhost:3000
- Navigation shows 3 links: Dashboard, Gantt, Bedrijven
- Active page has distinct visual styling
- Theme toggle switches dark/light mode
- Theme persists across page refresh without flash
- All pages have Dutch placeholder text
- Light mode: white backgrounds, subtle gray borders, clean typography (UIST-02)
- Dark mode: dark gray backgrounds with appropriate contrast (UIST-03)
- Desktop-first responsive layout (UIST-07)
</verification>

<success_criteria>
The app shell is complete and visually polished. Navigation works across all three pages with active page indication. Dark/light mode toggles instantly, persists across refreshes without any flash. The layout is desktop-first and responsive. All visible text is in Dutch. The foundation is ready for Phase 2 (company management).
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-app-shell/01-04-SUMMARY.md`
</output>
