---
phase: 01-foundation-app-shell
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - src/app/layout.tsx
  - src/app/page.tsx
  - src/app/globals.css
  - src/lib/utils.ts
  - src/types/database.ts
  - src/lib/supabase.ts
  - .env.local
  - .env.example
autonomous: true
user_setup:
  - service: supabase
    why: "Database backend for companies and tasks"
    env_vars:
      - name: NEXT_PUBLIC_SUPABASE_URL
        source: "Supabase Dashboard -> Project Settings -> API -> Project URL"
      - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
        source: "Supabase Dashboard -> Project Settings -> API -> anon public key"
    dashboard_config:
      - task: "Create Supabase project (if not exists)"
        location: "https://supabase.com/dashboard -> New Project"
      - task: "Run SQL schema to create companies and tasks tables"
        location: "Supabase Dashboard -> SQL Editor"

must_haves:
  truths:
    - "Next.js 16 app builds and renders in the browser"
    - "shadcn/ui is initialized with Tailwind v4 and the Button component works"
    - "TypeScript types for Company and Task match the database schema"
    - "Supabase client connects using environment variables"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies"
      contains: "next"
    - path: "src/types/database.ts"
      provides: "TypeScript types for Supabase schema"
      exports: ["Company", "Task", "CompanyWithTasks", "Database"]
    - path: "src/lib/supabase.ts"
      provides: "Supabase singleton client"
      exports: ["supabase"]
    - path: "src/lib/utils.ts"
      provides: "cn() class merge helper"
      exports: ["cn"]
    - path: ".env.local"
      provides: "Supabase credentials"
      contains: "NEXT_PUBLIC_SUPABASE_URL"
  key_links:
    - from: "src/lib/supabase.ts"
      to: "src/types/database.ts"
      via: "generic type parameter on createClient"
      pattern: "createClient<Database>"
    - from: "src/lib/supabase.ts"
      to: ".env.local"
      via: "process.env reads"
      pattern: "process\\.env\\.NEXT_PUBLIC_SUPABASE"
---

<objective>
Scaffold the Next.js 16 project with all dependencies, initialize shadcn/ui, create database types, and configure the Supabase client.

Purpose: Establish the foundation that every other plan builds on -- the running app, type system, and database connection.
Output: A buildable Next.js 16 app with shadcn/ui, typed Supabase client, and database type definitions.
</objective>

<execution_context>
@C:\Users\bstei\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bstei\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-app-shell/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Next.js 16 project with shadcn/ui and all dependencies</name>
  <files>
    package.json
    tsconfig.json
    src/app/layout.tsx
    src/app/page.tsx
    src/app/globals.css
    src/lib/utils.ts
  </files>
  <action>
    1. Run `npx create-next-app@latest . --yes` in the project root directory (C:\Users\bstei\nextwave-dashboard). This scaffolds Next.js 16 with TypeScript, Tailwind v4, App Router, and Turbopack as defaults. Note: The project directory already exists with .planning/, so use `.` as the directory target. If create-next-app refuses to scaffold into a non-empty directory, use a temp directory and move files.

    2. Run `npx shadcn@latest init` to initialize shadcn/ui. When prompted, accept defaults (it will configure Tailwind v4 CSS variables with OKLCH colors, create src/lib/utils.ts with the cn() helper, and set up component paths).

    3. Install core dependencies:
       ```
       npm install @supabase/supabase-js date-fns @date-fns/tz next-themes
       ```

    4. Add the shadcn Button component (needed for theme toggle and navigation):
       ```
       npx shadcn@latest add button
       ```

    5. Set `lang="nl"` on the html element in src/app/layout.tsx (the scaffolded default will be "en").

    6. Replace the default page.tsx content with a simple placeholder:
       ```tsx
       export default function DashboardPage() {
         return (
           <main className="flex min-h-screen items-center justify-center">
             <h1 className="text-2xl font-bold">NextWave Dashboard</h1>
           </main>
         )
       }
       ```

    IMPORTANT:
    - Do NOT install @supabase/ssr (not needed without auth)
    - Do NOT install date-fns-tz (use @date-fns/tz instead)
    - Do NOT use `next lint` in package.json scripts (removed in Next.js 16)
    - Do NOT add `--turbopack` flag to dev script (it is the default in v16)
  </action>
  <verify>
    Run `npm run build` -- should complete without errors.
    Run `npm run dev` and confirm the app loads at http://localhost:3000 showing "NextWave Dashboard".
    Verify shadcn/ui is initialized: src/components/ui/button.tsx exists.
    Verify package.json contains @supabase/supabase-js, date-fns, @date-fns/tz, next-themes.
  </verify>
  <done>
    Next.js 16 project builds successfully. shadcn/ui initialized with Tailwind v4. All Phase 1 dependencies installed. Default page renders "NextWave Dashboard".
  </done>
</task>

<task type="auto">
  <name>Task 2: Create database types and Supabase singleton client</name>
  <files>
    src/types/database.ts
    src/lib/supabase.ts
    .env.local
    .env.example
  </files>
  <action>
    1. Create `src/types/database.ts` with TypeScript types matching the Supabase schema from RESEARCH.md:
       - `Company` type with all fields: id (string), name (string), warmup_start_date (string | null), go_live_date (string | null), status ('warmup' | 'live' | 'completed' | 'paused'), contact_person (string | null), email (string | null), phone (string | null), client_notes (string | null), personality_score (number | null), mail_variant_1/2/3 (string | null), feedback_mailvarianten (string | null), toekomstige_wensen (string | null), extra_notes (string | null), created_at (string), updated_at (string)
       - `Task` type: id (string), company_id (string), title (string), deadline (string), is_completed (boolean), is_urgent (boolean), is_date_editable (boolean), notes (string | null), created_at (string)
       - `CompanyWithTasks` = Company & { tasks: Task[] }
       - `Database` type for Supabase generic client with Tables.companies (Row, Insert, Update) and Tables.tasks (Row, Insert, Update). Insert types omit id/timestamps. Update types are Partial of Insert.

    2. Create `src/lib/supabase.ts`:
       - Import createClient from @supabase/supabase-js
       - Import Database type from @/types/database
       - Read NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY from process.env
       - Throw descriptive error if either is missing
       - Export singleton: `export const supabase = createClient<Database>(url, key)`

    3. Create `.env.local` with placeholder values:
       ```
       NEXT_PUBLIC_SUPABASE_URL=your-supabase-url-here
       NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key-here
       ```

    4. Create `.env.example` (committed to git) with the same structure but no real values, documenting what's needed.

    5. Ensure `.gitignore` includes `.env.local` (create-next-app should handle this, but verify).

    IMPORTANT:
    - Use `createClient<Database>` for typed queries
    - Export the singleton as a named export `supabase`, not default
    - The error message when env vars are missing should mention .env.local specifically
  </action>
  <verify>
    TypeScript compilation: `npx tsc --noEmit` passes without errors.
    Verify src/types/database.ts exports Company, Task, CompanyWithTasks, Database types.
    Verify src/lib/supabase.ts exports supabase client.
    Verify .env.example exists and is not in .gitignore.
    Verify .env.local exists and IS in .gitignore.
  </verify>
  <done>
    Database types match the schema from RESEARCH.md (Company with all fields, Task with all fields, Database type for Supabase generics). Supabase client is typed and exports a singleton. Environment variable template exists for onboarding.
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- `npm run dev` starts and the app loads at localhost:3000
- `npx tsc --noEmit` passes (all types valid)
- src/components/ui/button.tsx exists (shadcn initialized)
- src/types/database.ts exports Company, Task, Database types
- src/lib/supabase.ts exports typed supabase client
- .env.local exists with Supabase placeholder values
</verification>

<success_criteria>
The Next.js 16 project is scaffolded, builds, and runs. shadcn/ui is initialized with Tailwind v4. All Phase 1 npm dependencies are installed. Database types are defined and the Supabase client is configured as a typed singleton. The foundation is ready for all subsequent plans to build on.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-app-shell/01-01-SUMMARY.md`
</output>
