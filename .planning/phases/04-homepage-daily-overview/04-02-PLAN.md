---
phase: 04-homepage-daily-overview
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/homepage/daily-header.tsx
  - src/components/homepage/progress-donut.tsx
  - src/components/homepage/today-task-row.tsx
autonomous: true

must_haves:
  truths:
    - "DailyHeader displays 'Vandaag' heading with Dutch-formatted current date from useToday()"
    - "ProgressDonut renders an SVG donut showing completed/total ratio with color gradient and center counter"
    - "TodayTaskRow displays company name, task title, green checkmark + strikethrough for completed tasks, and red overdue badge"
  artifacts:
    - path: "src/components/homepage/daily-header.tsx"
      provides: "Vandaag header with Dutch date"
      contains: "formatDutchDateCapitalized"
    - path: "src/components/homepage/progress-donut.tsx"
      provides: "SVG donut chart component"
      contains: "stroke-dasharray"
    - path: "src/components/homepage/today-task-row.tsx"
      provides: "Single task row with overdue badge"
      contains: "Badge"
  key_links:
    - from: "src/components/homepage/daily-header.tsx"
      to: "src/lib/dates.ts"
      via: "formatDutchDateCapitalized import"
      pattern: "import.*formatDutchDateCapitalized.*from.*dates"
    - from: "src/components/homepage/daily-header.tsx"
      to: "src/lib/today-provider.tsx"
      via: "useToday hook"
      pattern: "import.*useToday.*from.*today-provider"
    - from: "src/components/homepage/today-task-row.tsx"
      to: "src/components/ui/badge.tsx"
      via: "Badge import for overdue display"
      pattern: "import.*Badge.*from.*ui/badge"
---

<objective>
Build the three presentational UI components for the homepage: the "Vandaag" date header, the SVG progress donut chart, and the task row with overdue badge.

Purpose: These are self-contained display components with no data-fetching logic. They accept props and render. Building them independently from the data layer enables parallel execution.
Output: Three client components in `src/components/homepage/` ready for assembly in Plan 03.
</objective>

<execution_context>
@C:\Users\bstei\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bstei\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-homepage-daily-overview/04-RESEARCH.md

@src/lib/dates.ts
@src/lib/today-provider.tsx
@src/lib/overdue.ts
@src/components/ui/badge.tsx
@src/components/gantt/task-marker.tsx
@src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DailyHeader and ProgressDonut components</name>
  <files>
    src/components/homepage/daily-header.tsx
    src/components/homepage/progress-donut.tsx
  </files>
  <action>
**DailyHeader (`src/components/homepage/daily-header.tsx`):**
- 'use client' directive (uses useToday hook)
- Import `formatDutchDateCapitalized` from `@/lib/dates` and `useToday` from `@/lib/today-provider`
- Render: `<h1>` with "Vandaag" and `<p>` with `formatDutchDateCapitalized(today)` in muted foreground
- Use semantic Tailwind classes: `text-foreground` for heading, `text-muted-foreground` for date
- Requirements covered: HOME-01

**ProgressDonut (`src/components/homepage/progress-donut.tsx`):**
- 'use client' directive (pure component, but parent is client)
- Props: `{ completed: number; total: number; size?: number; strokeWidth?: number }`
- Default: size = 120, strokeWidth = 10
- SVG implementation:
  - Calculate center, radius, circumference, ratio, dashOffset
  - Apply `-rotate-90` class on `<svg>` so progress starts at 12 o'clock (not 3 o'clock)
  - Background circle: `className="stroke-muted"`, no fill
  - Progress circle: color based on ratio -- `stroke-green-500` when ratio >= 1, `stroke-orange-500` when ratio >= 0.5, `stroke-red-500` otherwise
  - `strokeLinecap="round"` for rounded ends
  - Center text: `{completed}/{total}` in absolute position, `text-lg font-bold`
- Handle edge case: total = 0 should show empty ring (ratio = 0), not NaN
- Requirements covered: HOME-02
  </action>
  <verify>npx tsc --noEmit -- compiles without type errors</verify>
  <done>DailyHeader renders "Vandaag" with Dutch date. ProgressDonut renders SVG donut with color gradient and center counter.</done>
</task>

<task type="auto">
  <name>Task 2: Create TodayTaskRow component</name>
  <files>src/components/homepage/today-task-row.tsx</files>
  <action>
**TodayTaskRow (`src/components/homepage/today-task-row.tsx`):**
- 'use client' directive
- Import `CircleCheck` from `lucide-react`, `Badge` from `@/components/ui/badge`, `cn` from `@/lib/utils`
- Define a local interface for props (do NOT import TodayTask from homepage.ts -- that creates a cross-plan dependency). Instead, define props inline:
  ```typescript
  interface TodayTaskRowProps {
    companyName: string
    title: string
    isCompleted: boolean
    isOverdue: boolean
    daysOverdue: number
    onClick: () => void
  }
  ```
- Render as a full-width `<button>` (entire row is clickable per HOME-07):
  - `type="button"`, full width, text-left, padding, rounded border, hover:bg-accent transition
  - Left side: flex row with optional green CircleCheck icon (size-5, text-green-500, shrink-0) when completed
  - Company name in `text-xs text-muted-foreground`
  - Task title in `text-sm`, with `line-through text-muted-foreground` when completed (using cn())
  - Right side: `Badge variant="destructive"` showing `-{daysOverdue}` when isOverdue is true
- Overdue badge format: `-{daysOverdue}` (e.g., "-1", "-2") matching TaskMarker pattern
- Requirements covered: HOME-04, HOME-05
  </action>
  <verify>npx tsc --noEmit -- compiles without type errors</verify>
  <done>TodayTaskRow renders company name, task title, green checkmark + strikethrough for completed, red "-N" badge for overdue. Entire row is clickable.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` compiles without errors
- All three components exist in src/components/homepage/
- DailyHeader uses formatDutchDateCapitalized (not custom date formatting)
- ProgressDonut uses SVG stroke-dasharray (not a charting library)
- TodayTaskRow uses Badge component (not custom badge styling)
- All components use semantic Tailwind classes (text-foreground, text-muted-foreground, etc.)
</verification>

<success_criteria>
- DailyHeader shows "Vandaag" with Dutch-formatted date from useToday()
- ProgressDonut renders correct SVG with progress starting at 12 o'clock, color gradient, center counter
- TodayTaskRow shows company name, title, strikethrough + green check for completed, "-N" red badge for overdue
- All components accept props (no internal data fetching) and are ready for composition
</success_criteria>

<output>
After completion, create `.planning/phases/04-homepage-daily-overview/04-02-SUMMARY.md`
</output>
